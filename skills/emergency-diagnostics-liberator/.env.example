# Emergency Diagnostics Liberator Environment Variables

# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control

# ============================================
# Diagnostic Interface Configuration
# ============================================

# Interface type: obd2 for OBD-II adapter, can for direct CAN access
DIAG_INTERFACE_TYPE=obd2

# OBD-II serial port
# Common values: /dev/ttyUSB0, /dev/ttyUSB1, /dev/ttyACM0, COM3 (Windows)
DIAG_INTERFACE_PORT=/dev/ttyUSB0

# CAN interface (for direct CAN access)
DIAG_CAN_INTERFACE=can0
DIAG_BAUDRATE=250000

# ============================================
# Diagnostic Protocol
# ============================================

# Protocol selection
# auto: Auto-detect protocol
# j1939: SAE J1939 (heavy equipment standard)
# iso15765: ISO 15765 (UDS on CAN)
# iso14230: ISO 14230 (KWP2000)
DIAG_PROTOCOL=auto

# Manufacturer selection
# auto: Auto-detect from codes
# johndeere: John Deere
# caseih: Case IH
# agco: AGCO
# kubota: Kubota
# newholland: New Holland
DIAG_MANUFACTURER=auto

# ============================================
# Code Database
# ============================================

# Path to code database
CODE_DB_PATH=/opt/emergency-diagnostics/codes.db

# Offline mode (use cached codes only)
# true: No external lookups, use local database only
# false: Allow external database updates
OFFLINE_MODE=true

# Database update check interval (in hours)
# 0 = disable automatic updates
UPDATE_CHECK_INTERVAL=168

# ============================================
# Logging Configuration
# ============================================

# Log level: debug, info, warn, error
DIAG_LOG_LEVEL=info

# Log file path
DIAG_LOG_FILE=/var/log/emergency-diagnostics.log

# Maximum log file size (in MB)
DIAG_LOG_MAX_SIZE=100

# Number of log files to rotate
DIAG_LOG_ROTATION=5

# ============================================
# Reporting Configuration
# ============================================

# Report output directory
DIAG_REPORT_DIR=/var/log/emergency-diagnostics/reports

# Enable PDF report generation
ENABLE_PDF_REPORTS=true

# Enable JSON export
ENABLE_JSON_EXPORT=true

# Include sensor data in reports
REPORT_INCLUDE_SENSORS=true

# Historical data for reports (in days)
REPORT_HISTORY_DAYS=30

# ============================================
# Safety Settings
# ============================================

# Disable safety overrides (RECOMMENDED: always keep this true)
# true: Never allow clearing critical codes without proper verification
# false: Allow code clearing without checks (DANGEROUS)
SAFETY_OVERRIDE_DISABLED=true

# Require confirmation for destructive actions
REQUIRE_CONFIRMATION=true

# Warn before clearing codes
WARN_BEFORE_CLEAR=true

# ============================================
# Equipment Information
# ============================================

# Default equipment type
EQUIPMENT_TYPE=tractor

# Default equipment make
EQUIPMENT_MAKE=unknown

# Default equipment model
EQUIPMENT_MODEL=unknown

# Vehicle Identification Number (VIN)
# Optional: used for tracking and reporting
EQUIPMENT_VIN=

# ============================================
# Advanced Settings
# ============================================

# Enable debug mode (additional logging)
DEBUG_MODE=false

# Connection timeout (in seconds)
CONNECTION_TIMEOUT=10

# Code reading timeout (in seconds)
CODE_READ_TIMEOUT=30

# Maximum retry attempts for failed connections
MAX_RETRIES=3

# ============================================
# Notifications (Optional)
# ============================================

# Enable error notifications
ERROR_NOTIFICATIONS_ENABLED=false

# Email for notifications
ERROR_NOTIFICATION_EMAIL=

# SMTP server for notifications
SMTP_SERVER=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM=Emergency-Diagnostics <noreply@farmfriendlabs.com>

# ============================================
# API Keys (Optional)
# ============================================

# Manufacturer API access (for extended functionality)
# These are OPTIONAL - skill works without them

# John Deere API (for extended diagnostics)
JD_API_KEY=
JD_API_SECRET=
JD_API_ENVIRONMENT=prod

# Case IH AFS API
CASE_API_KEY=
CASE_API_SECRET=

# AGCO Fuse API
AGCO_API_KEY=
AGCO_API_SECRET=

# ============================================
# Hardware-Specific Settings
# ============================================

# OBD-II adapter type
# Options: elm327, obdlink, stn, agc, canusb
OBD_ADAPTER_TYPE=elm327

# Baud rate for OBD-II adapter
OBD_BAUDRATE=115200

# CAN hardware type
# Options: socketcan, vector, peak, kvaser
CAN_HARDWARE=socketcan

# Vector hardware settings (if using Vector interface)
VECTOR_CHANNEL=0
VECTOR_DRIVER=virtual

# PEAK hardware settings (if using PEAK PCAN)
PEAK_CHANNEL=PCAN_USBBUS1

# ============================================
# Sensor Monitoring
# ============================================

# Default sensors to monitor
# Comma-separated list of SPNs
DEFAULT_SENSORS=91,100,105,111,1572,172

# Sensor update interval (in seconds)
SENSOR_UPDATE_INTERVAL=1

# Number of samples to average
SENSOR_AVERAGE_SAMPLES=5

# ============================================
# Code Clearing Policy
# ============================================

# Allow clearing codes remotely
REMOTE_CLEAR_ENABLED=false

# Require photo evidence before clearing critical codes
REQUIRE_PHOTO_EVIDENCE=false

# Minimum time between clears for same code (in minutes)
CLEAR_COOLDOWN=5

# ============================================
# Integration Settings
# ============================================

# Enable Farm Data Simulator integration
SIMULATOR_ENABLED=false

# Simulator endpoint
SIMULATOR_ENDPOINT=http://localhost:8000

# Enable webhook notifications
WEBHOOK_ENABLED=false
WEBHOOK_URL=
WEBHOOK_SECRET=

# ============================================
# Performance Tuning
# ============================================

# Maximum concurrent code lookups
MAX_CONCURRENT_LOOKUPS=10

# Cache size for code lookups (number of codes)
CODE_CACHE_SIZE=1000

# Enable database connection pooling
DB_POOLING_ENABLED=true

# Maximum database connections
DB_MAX_CONNECTIONS=5
